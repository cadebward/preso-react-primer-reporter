<!doctype html>
<html>

<head>
  <title>Full Stack JavaScript</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="author" content="Cade B. Ward" />
  <meta name="forked from" content="Thomas A. Valletta" />
  <link href="css/impress.css" rel="stylesheet" />
  <link href="css/prism.css" rel="stylesheet" />
  <link href="css/styles.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css?family=Roboto+Slab" rel="stylesheet">
</head>

<body>
  <div class="dashboard">
    <span id="p"></span>
    <span id="v">0</span>
    <span id="bf">0%</span>
  </div>
  <div id="participation-url">
    <span>http://bit.ly/2zGnuBK</span>
  </div>
  <p class="fallback-message">
    Your browser doesn't support impress.js. Try Chrome or Safari.
  </p>
  <div id="impress">



    <div id="title" class="step stay" data-x="0" data-y="0">
      <h1 style="text-align: center">React
        <br/>Primer</h1>
    </div>



    <div id="participation" class="step stay" data-x="0" data-y="1000">
      <h1>Participate</h1>
      <h2>http://bit.ly/2zGnuBK</h2>
    </div>



    <div id="intro" class="step stay" data-x="0" data-y="2000">
      <h1>React?</h1>
      <p>A JavaScript library for building user interfaces</p>
    </div>


    <!-- HELLO WORLD -->

    <div id="hello" class="step stay" data-x="0" data-y="3000">
        <h1>Hello, World</h1>
      </div>

      <div class="step invis" data-x="1000" data-y="3000">
        <pre><code class="language-jsx">ReactDOM.render(
  &lt;h1&gt;Hello, world!&lt;/h1&gt;,
  document.getElelemntById('root')
)</code></pre>
      </div>

      <div class="step invis" data-x="2000" data-y="3000">
        <pre data-line="2"><code class="language-jsx">ReactDOM.render(
  &lt;h1&gt;Hello, world!&lt;/h1&gt;,
  document.getElelemntById('root')
)</code></pre>
      </div>

    <!-- JSX -->

    <div id="jsx" class="step stay" data-x="0" data-y="4000">
        <h1>Introducing</h1>
        <h2>JSX</h2>
      </div>

      <div class="step invis" data-x="1000" data-y="4000">
        <pre><code class="language-jsx">const element = &lt;h1&gt;Hello, world!&lt;/h1&gt;</code></pre>
      </div>

      <div class="step invis" data-x="2000" data-y="4000">
        <h4>Experessions</h4>
        <pre data-line="3"><code class="language-jsx">const element = (
  &lt;h1&gt;
    Hello, {Math.random() * 100}
  &lt;/h1&gt;
)</code></pre>
      </div>

      <div class="step invis" data-x="3000" data-y="4000">
          <h4>Conditions</h4>
          <pre data-line="3,5"><code class="language-jsx">function getJSX (name) {
  if (name) {
    &lt;h1&gt;return Hello, {name}!&lt;/h1&gt;
  }
  return &lt;h1&gt;Hello, world!&lt;/h1&gt;
}</code></pre>
      </div>

    <div class="step invis" data-x="4000" data-y="4000">
      <h4>Attributes</h4>
      <pre><code class="language-jsx">const element = &lt;img src="some source"/&gt;</code></pre>
    </div>

    <div class="step invis" data-x="4000" data-y="4000">
      <h4>Attributes</h4>
      <pre><code class="language-jsx">const element = &lt;img src={src}/&gt;</code></pre>
    </div>

    <div class="step invis" data-x="5000" data-y="4000">
      <h4>Camelcase</h4>
      <pre><code class="language-jsx">const element = &lt;div className="hi"/&gt;</code></pre>
    </div>

    <div class="step invis" data-x="6000" data-y="4000">
      <h4>It's just an object!</h4>
      <div class="side-by-side">
        <div class="left">
          <pre><code class="language-jsx">const el = (
  &lt;h1 className="greeting"&gt;
    Hello, world!
  &lt;/h1&gt;
)</code></pre>
        </div>
        <div class="right">
          <pre><code class="language-js">const el = React.createElement(
  'h1',
  { className: 'greeting' },
  'Hello, world!'
)</code></pre>
        </div>
      </div>
    </div>

    <!-- COMPONENT BASED -->

    <div id="component" class="step stay" data-x="0" data-y="5000">
      <h1>Component Based</h1>
    </div>

    <div class="step invis" data-x="1000" data-y="5000">
      <h4>Stateless Component</h3>
        <pre><code class="language-jsx">function MyComponent (props) {
  return &lt;div&gt;Hello World!&lt;/div&gt;
}</code></pre>
    </div>

    <div class="step invis" data-x="2000" data-y="5000">
      <h4>Class Component</h3>
        <pre><code class="language-jsx">class MyComponent extends Component {
  render() {
    return &lt;div&gt;Hello World!&lt;/div&gt;
  }
}</code></pre>
    </div>

    <div class="step invis" data-x="3000" data-y="5000">
        <h4>Stateless Component With Props</h3>
          <pre><code class="language-jsx">function Welcome (props) {
    return &lt;div&gt;Hi, {props.name}!&lt;/div&gt;
  }</code></pre>
      </div>

      <div class="step invis" data-x="4000" data-y="5000">
        <h4>Rendering Components</h3>
          <pre><code class="language-jsx">const el = (
  &lt;Welcome name="Cade" /&gt;
)</code></pre>
      </div>

      <div class="step invis" data-x="5000" data-y="5000">
        <h4>Component Composition</h3>
          <pre><code class="language-jsx">function Welcome (props) {
  return &lt;h1&gt;Hello, {props.name}&lt;/h1&gt;
}
</code></pre>
      </div>

      <div class="step invis" data-x="6000" data-y="5000">
        <h4>Component Composition</h3>
          <pre data-line="5-11"><code class="language-jsx">function Welcome (props) {
  return &lt;h1&gt;Hello, {props.name}&lt;/h1&gt;
}

function App () {
  return (
    &lt;Welcome name="Cade" /&gt;
    &lt;Welcome name="React" /&gt;
    &lt;Welcome name="Kuali" /&gt;
  )
}
</code></pre>
      </div>


      <div class="step invis" data-x="7000" data-y="5000">
        <h4>Component Composition</h3>
          <pre data-line="13-16"><code class="language-jsx">function Welcome (props) {
  return &lt;h1&gt;Hello, {props.name}&lt;/h1&gt;
}

function App () {
  return (
    &lt;Welcome name="Cade" /&gt;
    &lt;Welcome name="React" /&gt;
    &lt;Welcome name="Kuali" /&gt;
  )
}

ReactDOM.render(
  &lt;App /&gt;,
  document.getElementById('root')
)</code></pre>
      </div>

      <div class="step invis" data-x="8000" data-y="5000">
        <h4>Component Composition</h3>
          <pre><code class="language-jsx">function App () {
  const data = ['Cade', ...]
  return (
    &lt;div&gt;
      {data.map((name) =>
        &lt;Welcome name={name} /&gt;}
    &lt;/div&gt;
  )
})</code></pre>
      </div>

      <div class="step invis" data-x="9000" data-y="5000">
        <h4>Component Composition</h3>
          <pre data-line="5-6"><code class="language-jsx">function App () {
  const data = ['Cade', ...]
  return (
    &lt;div&gt;
      {data.map((name) =>
        &lt;Welcome name={name} /&gt;}
    &lt;/div&gt;
  )
})</code></pre>
      </div>


  <!-- HANDLING EVENTS -->

  <div id="events" class="step stay" data-x="0" data-y="6000">
    <h1>Handling Events</h1>
  </div>

  <div class="step invis" data-x="1000" data-y="6000">
      <h4>Traditional Button Event</h3>
        <pre><code class="language-jsx">&lt;button onclick="fireMissles()"&gt;
  Fire The Missles
&lt;/button&gt;</code></pre>
    </div>

    <div class="step invis" data-x="2000" data-y="6000">
      <h4>React Button Event</h3>
        <pre><code class="language-jsx">&lt;button onClick={fireMissles}&gt;
  Fire The Missles
&lt;/button&gt;</code></pre>
    </div>

    <div class="step invis" data-x="3000" data-y="6000">
        <h4>React Button Event</h3>
          <pre><code class="language-jsx">function fireMissles () {
  console.log('The button was clicked!')
}

&lt;button onClick={fireMissles}&gt;
  Fire The Missles
&lt;/button&gt;</code></pre>
      </div>


    <div class="step invis" data-x="4000" data-y="6000">
      <h4>React Input Event</h3>
      <pre><code class="language-jsx">&lt;input onChange={handleChange} /&gt;</code></pre>
    </div>

    <div class="step invis" data-x="5000" data-y="6000">
      <h4>React Input Event</h3>
      <pre><code class="language-jsx">function handleChange (e) {
  console.log(e.target.value)
}

&lt;input onChange={handleChange} /&gt;</code></pre>
    </div>

    <div class="step invis" data-x="6000" data-y="6000">
      <h4>Passing Arguments</h3>
      <pre><code class="language-jsx">&lt;button onClick={fireSpecificMissle}&gt;</code></pre>
    </div>

    <div class="step invis" data-x="6000" data-y="6000">
      <h4>Passing Arguments</h3>
      <pre><code class="language-jsx">&lt;button onClick={(e) => fn(id, e)}&gt;
&lt;button onClick={fn.bind(this, id)}&gt;</code></pre>
    </div>











    <!--
    <div class="step stay" data-x="0" data-y="3000">
      <h2>One: The Interview</h2>
    </div>

    <div class="step invis" data-x="-100" data-y="3000" data-z="250" data-rotate-y="-55">
      <div class="right">
        <h4>What will be output on the console?</h4>
        <div class="answer">
          <span class="red">A.</span>1, 2, 3, 4, 5</div>
        <div class="answer">
          <span class="yellow">B.</span>0, 1, 2, 3, 4</div>
        <div class="answer">
          <span class="green">C.</span>4, 4, 4, 4, 4</div>
        <div class="answer">
          <span class="blue">D.</span>5, 5, 5, 5, 5</div>
      </div>
    </div>

    <div class="step invis" data-x="100" data-y="3000" data-z="250" data-rotate-y="55">
      <div class="left">
        <h4>Correct answer:</h4>
        <div class="answer">
          <span class="blue">D.</span>5, 5, 5, 5, 5</div>
        <br/>
        <h4>Why:</h4>
        <h5>The function in the timeout does not get executed until the for loop is exhausted</h5>
      </div>
    </div>

    <div class="step invis" data-x="1000" data-y="3000">
      <div class="side-by-side">
        <div class="left">
          <h4>Original</h3>
            <pre><code class="language-js">for (var i = 0; i < 5; i++) {
  setTimeout(function() {
    console.log(i)
  }, 0)
}</code></pre>
        </div>
        <div class="right">
          <h4>Fix One: </h3>
            <pre><code class="language-js">for (var i = 0; i < 5; i++) {
  setTimeout((function(x) {
    console.log(x)
  })(i), 0)
}</code></pre>
            <h5>An
              <em>Immediately Invoked</em> function creates a new scope</h5>
        </div>
      </div>
    </div>

    <div class="step invis" data-x="2000" data-y="3000">
      <div class="side-by-side">
        <div class="left">
          <h4>Original</h3>
            <pre><code class="language-js">for (var i = 0; i < 5; i++) {
  setTimeout(function() {
    console.log(i)
  }, 0)
}</code></pre>
        </div>
        <div class="right">
          <h4>Fix Two: </h3>
            <pre><code class="language-js">for (let i = 0; i < 5; i++) {
  setTimeout(function() {
    console.log(i)
  }, 0)
}</code></pre>
            <h5>Using
              <em>let</em> works because the five instances of the function each refer to different instances of
              <em>i</em>
            </h5>
        </div>
      </div>
    </div>



    <div class="step stay" data-x="0" data-y="4000">
      <h2>Two: Easy Peasy?</h2>
      <pre><code class="language-js">var a = 1;
var b = 2;
if (a === 1) {
  var a = 11
  let b = 22
  console.log(a)
  console.log(b)
}
console.log(a)
console.log(b)
</code></pre>
    </div>

    <div class="step invis" data-x="-100" data-y="4000" data-z="250" data-rotate-y="-55">
      <div class="right">
        <h4>What will be output on the console?</h4>
        <div class="answer">
          <span class="red">A.</span>11, 22, 11, 2</div>
        <div class="answer">
          <span class="yellow">B.</span>11, 22, 1, 2</div>
        <div class="answer">
          <span class="green">C.</span>11, 22, 11, 22</div>
        <div class="answer">
          <span class="blue">D.</span>Reference Error!</div>
      </div>
    </div>

    <div class="step invis" data-x="100" data-y="4000" data-z="250" data-rotate-y="55">
      <div class="left">
        <h4>Correct answer:</h4>
        <div class="answer">
          <span class="blue">A.</span>11, 22, 11, 2</div>
        <br/>
        <h4>Why:</h4>
        <h5>The
          <em>var</em> in JavaScript is not scoped by blocks ({}) only by functions. The
          <em>let</em> in JavaScript is unique per block</h5>
      </div>
    </div>



    <div class="step stay" data-x="0" data-y="5000">
      <h2>Three: Let there be foo</h2>
      <pre><code class="language-js">function test() {
  var foo = 33
  if (true) {
    let foo = (foo + 55)
    console.log(foo)
  }
}
test()</code></pre>
    </div>

    <div class="step invis" data-x="-100" data-y="5000" data-z="250" data-rotate-y="-55">
      <div class="right">
        <h4>What will be output on the console?</h4>
        <div class="answer">
          <span class="red">A.</span>88</div>
        <div class="answer">
          <span class="yellow">B.</span>55</div>
        <div class="answer">
          <span class="green">C.</span>33</div>
        <div class="answer">
          <span class="blue">D.</span>Reference Error!</div>
      </div>
    </div>

    <div class="step invis" data-x="100" data-y="5000" data-z="250" data-rotate-y="55">
      <div class="left">
        <h4>Correct answer:</h4>
        <div class="answer">
          <span class="blue">D.</span>Reference Error!</div>
        <br/>
        <h4>Why:</h4>
        <h5>In JavaScript the
          <em>Temporal Dead Zone</em> exists for a let that has not been declared resulting in a Reference Error. In the lexical
          scope of the if block,
          <em>foo</em> has been created but not initialized when
          <em>(foo + 55)</em> is evaluated.</h5>
      </div>
    </div>

    <div class="step invis" data-x="1000" data-y="5000">
      <div class="side-by-side">
        <div class="left">
          <h4>Original</h3>
            <pre><code class="language-js">function test() {
  var foo = 33
  if (true) {
    let foo = (foo + 55)
    console.log(foo)
  }
}
test()</code></pre>
        </div>
        <div class="right">
          <h4>Fix One: </h3>
            <pre><code class="language-js">function test() {
  var foo = 33
  if (true) {
    let bar = (foo + 55)
    console.log(bar)
  }
}
test()</code></pre>
            <h5>Using the same variable name in nested scopes is probably going to cause confusion. Just rename or reuse.</h5>
        </div>
      </div>
    </div>

    <div class="step invis" data-x="2000" data-y="5000">
      <div class="side-by-side">
        <div class="left">
          <h4>Original</h3>
            <pre><code class="language-js">function test() {
  var foo = 33
  if (true) {
    let foo = (foo + 55)
    console.log(foo)
  }
}
test()</code></pre>
        </div>
        <div class="right">
          <h4>Fix Two: </h3>
            <pre><code class="language-js">function test() {
  var foo = 33
  if (true) {
    console.log(foo += 55)
  }
}
test()</code></pre>
        </div>
      </div>
    </div>



    <div class="step stay" data-x="0" data-y="6000">
      <h2>Four: Contextual Scope</h2>
      <pre style="font-size: 0.9em"><code class="language-js">const thing = {
  name: 'Something',
  hello: function() {
    console.log(`Hello, ${this}`)
  },
  toString: function() {
    return this.name
  }
}
const sayHello = thing.hello
sayHello()</code></pre>
    </div>

    <div class="step invis" data-x="-100" data-y="6000" data-z="250" data-rotate-y="-55">
      <div class="right" style="font-size: .95em">
        <h4>What will be output on the console?</h4>
        <div class="answer">
          <span class="red">A.</span>Hello, Something</div>
        <div class="answer">
          <span class="yellow">B.</span>Hello, [object Object]</div>
        <div class="answer">
          <span class="green">C.</span>Hello, [object Window]</div>
        <div class="answer">
          <span class="blue">D.</span>Hello, {name: "Something", hello: ƒ, toString: ƒ}</div>
      </div>
    </div>

    <div class="step invis" data-x="100" data-y="6000" data-z="250" data-rotate-y="55">
      <div class="left thin-inline-code">
        <h4>Correct answer:</h4>
        <div class="answer">C.</span>Hello, [object Window]</div>
        <br/>
        <h4>Why:</h4>
        <h5>In node the answer would be "Hello, [object global]" because the global object replaces the window object. When a
          function is called from its parent (e.g.
          <code class="language-js">thing.hello()</code>) it is like using
          <em>call</em> (e.g.
          <code class="language-js">hello.call(thing)</code>). But when a function is passed or stored as a variable, only the function itself is stored.</h5>
      </div>
    </div>

    <div class="step invis" data-x="1000" data-y="6000">
      <div class="side-by-side">
        <div class="left">
          <h4>Original</h3>
            <pre><code class="language-js">const thing = {
  name: 'Something',
  hello: function() {
    console.log(`Hello, ${this}`)
  },
  toString: function() {
    return this.name
  }
}
const sayHello = thing.hello
sayHello()</code></pre>
        </div>
        <div class="right">
          <h4>Fix One: </h3>
            <pre><code class="language-js">const thing = {
  name: 'Something',
  hello: function() {
    console.log(`Hello, ${this}`)
  },
  toString: function() {
    return this.name
  }
}
const sayHello = thing.hello
sayHello.call(thing)</code></pre>
            <h5>Use
              <em>call</em> or
              <em>apply</em>.</h5>
        </div>
      </div>
    </div>

    <div class="step invis" data-x="2000" data-y="6000">
      <div class="side-by-side">
        <div class="left">
          <h4>Original</h3>
            <pre><code class="language-js">const thing = {
  name: 'Something',
  hello: function() {
    console.log(`Hello, ${this}`)
  },
  toString: function() {
    return this.name
  }
}
const sayHello = thing.hello
sayHello()</code></pre>
        </div>
        <div class="right">
          <h4>Fix Two: </h3>
            <pre><code class="language-js">const thing = {
  name: 'Something',
  hello: function() {
    console.log(`Hello, ${this}`)
  },
  toString: function() {
    return this.name
  }
}
const sayHello = thing.hello
sayHello.bind(thing)()</code></pre>
        </div>
      </div>
    </div>

    <div class="step invis" data-x="600" data-y="600" data-z="200" data-rotate-x="-16" data-rotate-y="65" data-rotate-z="-45">
      <div class="right">
        <br />
        <br />
        <br />
        <br />
        <h3>Thanks</h3>
        Thomas A. Valletta
        <h5 style="color: yellow">@tvalletta</h5>
      </div>
    </div>

  </div> -->

    <script type="text/javascript" src="js/impress.js"></script>
    <script type='text/javascript' src="/socket.io/socket.io.js"></script>
    <script type='text/javascript' src="js/prism.js"></script>

    <script>
      var socket = io('https://kd2017-react-primer.now.sh')
      var el = document.getElementById("impress");

      let sv
      var hidden = [];
      var shown = [];
      var highlighted = [];
      var faded = [];

      el.addEventListener("impress:stepenter", function (event) {

        socket.emit('stepenter')

        // --- stay ---
        if (event.target.classList.contains('stay')) {
          event.target.style.opacity = 1;
        }

        // --- data-show ---
        if (event.target.hasAttribute('data-show')) {
          var showList = event.target.getAttribute('data-show').split(' ');
          for (var i = 0; i < showList.length; ++i) {
            var $el = document.getElementById(showList[i]);
            shown.push({ el: $el, opacity: $el.style.opacity });
            $el.style.opacity = 1;
          }
        }

        // --- data-hide ---
        if (event.target.hasAttribute('data-hide')) {
          var hideList = event.target.getAttribute('data-hide').split(' ');
          for (var i = 0; i < hideList.length; ++i) {
            var $el = document.getElementById(hideList[i]);
            hidden.push({ el: $el, opacity: $el.style.opacity });
            $el.style.opacity = 0;
          }
        }

        // --- data-highlight ---
        if (event.target.hasAttribute('data-highlight')) {
          var highlightList = event.target.getAttribute('data-highlight').split(' ');
          for (var i = 0; i < highlightList.length; ++i) {
            var $el = document.getElementById(highlightList[i]);
            highlighted.push($el);
            $el.style['text-shadow'] = '0 0 5px white, 0 0 10px white, 0 0 30px white';
          }
        }

        // --- data-fade ---
        if (event.target.hasAttribute('data-fade')) {
          var fadeList = event.target.getAttribute('data-fade').split(' ')
          for (var i = 0; i < fadeList.length; ++i) {
            var $el = document.getElementById(fadeList[i])
            faded.push({ el: $el, opacity: $el.style.opacity })
            $el.style.opacity = 0.2
          }
        }

        // === CUSTOM CRAP ===z===z===z===z===z===z===z===z===z===z===z===z===z===

        // --- data-show-stack ---
        if (event.target.hasAttribute('data-show-stack')) {
          const cfg = {
            $el: event.target,
            dataset: [],
            dequeue: {
              interval: 16,
              count: .1
            },
            slow: 1
          }
          for (var i = 0; i < 100; ++i) {
            cfg.dataset[i] = {
              x: (Math.random() * 360) + 20,
              y: (Math.random() * 560) + 20,
              delay: i * 40
            }
          }
          sv = runStackVisualization(cfg)
        }
        // --- data-show-stack ---

      }, false)

      el.addEventListener("impress:stepleave", function (event) {

        // --- data-show ---
        if (hidden.length) {
          for (var i = 0; i < shown.length; ++i) {
            shown[i].el.style.opacity = shown[i].opacity
          }
          shown = [];
        }

        // --- data-hide ---
        if (hidden.length) {
          for (var i = 0; i < hidden.length; ++i) {
            hidden[i].el.style.opacity = hidden[i].opacity
          }
          hidden = [];
        }

        // --- data-highlighted ---
        if (highlighted.length) {
          for (var i = 0; i < highlighted.length; ++i) {
            highlighted[i].style['text-shadow'] = 'none'
          }
          highlighted = [];
        }

        // --- data-faded ---
        if (faded.length) {
          for (var i = 0; i < faded.length; ++i) {
            faded[i].el.style.opacity = faded[i].opacity
          }
          faded = []
        }

        // === CUSTOM CRAP ===z===z===z===z===z===z===z===z===z===z===z===z===z===

        // --- data-show-stack ---
        if (event.target.hasAttribute('data-show-stack')) {
          let $svg = event.target.querySelector('svg')
          $svg.remove()
        }

      }, false)

      document.addEventListener("impress:init", function (event) {

      })

      var API = impress()
      API.init()

      // MWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMW
      // --- VOTER STUFF ---
      // MWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMWMW

      let voterActive = true
      let participiationUrl = false
      document.addEventListener('keydown', event => {
        switch (event.key) {
          case 'v':
            voterActive = !voterActive
            const voterStyle = voterActive ? 'background-color:green' : 'background-color:red'
            document.getElementById('p').setAttribute('style', voterStyle)
            console.log({ voterActive })
            break
          case 'p':
            participiationUrl = !participiationUrl
            const participationStyle = participiationUrl ? 'display:block' : 'display:none'
            document.getElementById('participation-url').setAttribute('style', participationStyle)
            break
          case 'r':
            socket.emit('reset')
            break
        }
      })

      socket.on('ack', () => {
        socket.emit('register', 'reporter')
      })

      socket.on('boringfactor', (bf) => {
        document.getElementById('bf').innerText = Math.round(bf * 100) + '%'
        if (voterActive && (bf * 100) >= 50) {
          API.next()
        }
      })

      socket.on('voters', (count) => {
        document.getElementById('v').innerText = count
      })

    </script>
</body>

</html>